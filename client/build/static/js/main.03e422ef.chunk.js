(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){e.exports=a(144)},113:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(19),o=a.n(c),l=a(36),s=a(9),i=a(18),m={token:null,formMessage:"",loading:!1,error:!1};var u={laptops:[],loading:!1,error:!1,errorMessage:""};var p=a(102),f={itemsCount:0,items:[]};var E=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_LOADING":return Object(i.a)({},e,{loading:!0,error:!1,formMessage:""});case"AUTH_SIGNUP":return Object(i.a)({},e,{loading:!1,formMessage:t.message});case"AUTH_LOGIN":return Object(i.a)({},e,{loading:!1,token:t.token,formMessage:"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, \u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443!"});case"AUTH_ERROR":return Object(i.a)({},e,{error:!0,loading:!1,formMessage:t.errorMessage});case"AUTH_LOGOUT":return Object(i.a)({},e,{token:null,formMessage:""});case"AUTH_CLEAR_MESSAGE":return Object(i.a)({},e,{formMessage:""});default:return e}},laptop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LAPTOP_FETCH":return Object(i.a)({},e,{loading:!1,laptops:t.laptops});case"LAPTOP_LOADING":return Object(i.a)({},e,{loading:!0,error:!1});case"LAPTOP_ERROR":return Object(i.a)({},e,{error:!0,loading:!1,errorMessage:t.errorMessage});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD":var a=e.itemsCount;a+=1;var n=Object(p.a)(e.items);return n.push(t.item),Object(i.a)({},e,{itemsCount:a,items:n});default:return e}}}),d=a(93),g=a(37),_=a(40),h=a(41),b=a.n(h),O=a(60);function v(e,t,a){return function(){var n=Object(O.a)(b.a.mark((function n(r){var c,o,l,s,i,m;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:"AUTH_LOADING"}),c={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e,password:t})},o="/api/auth/login",n.prev=3,!a){n.next=17;break}return n.next=7,fetch(o,c);case 7:return l=n.sent,n.next=10,l.json();case 10:if(s=n.sent,l.ok){n.next=13;break}throw new Error(s.message);case 13:localStorage.setItem("token",s.token),r(N(s.token)),n.next=27;break;case 17:return o="/api/auth/signup",n.next=20,fetch(o,c);case 20:return i=n.sent,n.next=23,i.json();case 23:if(m=n.sent,i.ok){n.next=26;break}throw new Error(m.message);case 26:r({type:"AUTH_SIGNUP",message:m.message});case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(3),r(j(n.t0.message));case 32:case"end":return n.stop()}}),n,null,[[3,29]])})));return function(e){return n.apply(this,arguments)}}()}function N(e){return{type:"AUTH_LOGIN",token:e}}function j(e){return{type:"AUTH_ERROR",errorMessage:e}}function k(e){return function(){var t=Object(O.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e||localStorage.getItem("token"),localStorage.removeItem("token"),a({type:"AUTH_LOGOUT"}),!n){t.next=16;break}return r={headers:{Authorization:"Bearer ".concat(n)},method:"POST"},t.prev=5,t.next=8,fetch("/api/auth/logout",r);case 8:if(t.sent.ok){t.next=11;break}throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),a(j(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}()}a(113);var w=function(e){var t=e.title;return r.a.createElement("h2",{className:"section-header"},t)},x=a(4),y=(a(132),function(){return r.a.createElement("section",{className:"add-laptop"},r.a.createElement(x.e,null,r.a.createElement(w,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0443\u0442\u0431\u0443\u043a"}),r.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0444\u043e\u0440\u043c\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f")))}),A=a(73),T=a(101),C=a(78),S=a(33),M=function(e){return{notify:Object(n.useCallback)((function(){return Object(S.b)(e,{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),[e])}},P=(a(134),function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],c=t[1],o=Object(s.b)(),l=Object(s.c)((function(e){return e.auth.error})),i=Object(s.c)((function(e){return e.auth.loading})),m=Object(s.c)((function(e){return e.auth.formMessage})),u=M(m).notify;return Object(n.useEffect)((function(){m&&u()}),[m,u]),r.a.createElement(T.a,{initialValues:{email:"",password:""},onSubmit:function(e){e.isSignup?o(v(e.email,e.password,!1)):o(v(e.email,e.password,!0))},validationSchema:C.a().shape({email:C.b().email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email").required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),password:C.b().required("\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e").min(6,"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")})},(function(e){var t=e.touched,n=e.errors,o=e.handleChange,s=e.handleBlur,u=e.handleSubmit,p=e.setFieldValue;return r.a.createElement("form",{className:"auth__form form",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"form__logo"}),r.a.createElement("div",{className:"form__text form__title"},"\u041e\u043d\u043b\u0430\u0439\u043d \u043c\u0430\u0433\u0430\u0437\u0438\u043d"),r.a.createElement("div",{className:"form__text form__subtitle"},"BETA"),r.a.createElement("div",{className:"form__fields"},r.a.createElement("div",{className:"form__field"},r.a.createElement(x.g,{className:"form__icon",icon:"envelope"}),r.a.createElement("input",{className:"form__input",id:"email",onChange:o,onBlur:s,type:"text",name:"email",placeholder:"\u0412\u0430\u0448 email"})),n.email&&t.email?r.a.createElement("div",{className:"form__text form__error-message"},n.email):null,r.a.createElement("div",{className:"form__field"},r.a.createElement(x.g,{className:"form__icon",icon:"unlock"}),r.a.createElement("input",{className:"form__input",id:"password",onChange:o,onBlur:s,type:a?"text":"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),a?r.a.createElement(x.g,{className:"form__toggle-password ",icon:"eye",onClick:function(){return c(!a)}}):r.a.createElement(x.g,{className:"form__toggle-password ",icon:"eye-slash",onClick:function(){return c(!a)}})),n.password&&t.password?r.a.createElement("div",{className:"form__text form__error-message"},n.password):null),l?r.a.createElement("div",{className:"form__text form__error-message"},m):r.a.createElement("div",{className:"form__text form__success-message"},m),r.a.createElement("button",{className:"form__btn",type:"submit",disabled:i,onClick:function(e){p("isSignup",!1),u(e)}},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("div",{className:"form__signup form__text"},"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"," ",r.a.createElement("button",{className:"form__btn-reg",type:"submit",disabled:i,onClick:function(e){p("isSignup",!0),u(e)}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c")),r.a.createElement(S.a,null))}))}),R=(a(135),function(){return r.a.createElement("section",{className:"auth"},r.a.createElement(x.e,{className:"d-flex justify-content-center"},r.a.createElement(P,null)))}),L=(a(136),function(){return r.a.createElement("section",{className:"cart"},r.a.createElement(x.e,null,r.a.createElement(w,{title:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),r.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b")))}),U=(a(137),function(){var e=Object(s.c)((function(e){return e.auth.formMessage})),t=M(e).notify,a=Object(s.b)();return Object(n.useEffect)((function(){return e&&t(),function(){return a({type:"AUTH_CLEAR_MESSAGE"})}}),[t,a,e]),r.a.createElement("section",{className:"home"},r.a.createElement(x.e,null,r.a.createElement(w,{title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),r.a.createElement("p",null,'\u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u041d\u043e\u0443\u0442\u0431\u0443\u043a\u0438". \u0422\u0430\u043c \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430\u043c\u0438'),r.a.createElement(S.a,null)))});a(138);var I=function(e){var t=e.laptop,a=Object(s.b)(),n=Object(_.g)(),c=M("\u041d\u043e\u0443\u0442\u0431\u0443\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443! \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0442\u0443\u0434\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c ").notify;return r.a.createElement(x.c,{xs:"12",md:"6",lg:"4",className:"laptop-card",onClick:function(){return n.push("/laptops/"+t._id)}},r.a.createElement(S.a,null),r.a.createElement("img",{className:"laptop-card__img",src:t.img,alt:"preview"}),r.a.createElement("div",{className:"laptop-card__description"},t.description),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-2"},r.a.createElement("div",{className:"laptop-card__price"},t.price),r.a.createElement(x.g,{icon:"shopping-cart",className:"laptop-card__add",onClick:function(e){e.stopPropagation(),c(),a({type:"CART_ADD",item:t})}})),r.a.createElement("div",{className:"laptop-card__presence"},"\u0415\u0441\u0442\u044c \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"))},H=(a(139),function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.laptop.laptops}));return Object(n.useEffect)((function(){e(function(){var e=Object(O.a)(b.a.mark((function e(t){var a,n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LAPTOP_LOADING"}),a=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(a)},method:"GET"},e.prev=3,e.next=6,fetch("/api/laptops/",n);case 6:return r=e.sent,e.next=9,r.json();case 9:if(c=e.sent,r.ok){e.next=12;break}throw new Error(c.message);case 12:t({type:"LAPTOP_FETCH",laptops:c}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),t({type:"LAPTOP_ERROR",errorMessage:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement("section",{className:"laptops"},r.a.createElement(x.e,null,r.a.createElement(w,{title:"\u041d\u043e\u0443\u0442\u0431\u0443\u043a\u0438"}),r.a.createElement(x.o,{className:"laptops__list"},t.map((function(e){return r.a.createElement(I,{key:e._id,laptop:e})})))))}),D=(a(140),function(){return r.a.createElement("section",{className:"profile"},r.a.createElement(x.e,null,r.a.createElement(w,{title:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),r.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e \u043f\u0440\u043e\u0444\u0438\u043b\u0435")))}),G=(a(141),function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],c=t[1],o=Object(s.b)(),l=Object(s.c)((function(e){return e.cart.itemsCount})),i=function(){window.matchMedia("(max-width: 768px)").matches&&(document.querySelector("#hamburger").checked=!a,c(!a))};return r.a.createElement(x.k,{dark:!0,expand:"md"},r.a.createElement(x.j,{to:"/",className:"navbar-brand"},"ROZETKA"),r.a.createElement(x.f,{className:"d-inline d-md-none",color:"#fff",id:"hamburger",onClick:function(){c(!a)}}),r.a.createElement(x.d,{isOpen:a,navbar:!0},r.a.createElement(x.l,{left:!0},r.a.createElement(x.i,null,r.a.createElement(x.j,{to:"/laptops",exact:!0,onClick:i},r.a.createElement(x.g,{icon:"laptop",className:"mr-1"}),"\u041d\u043e\u0443\u0442\u0431\u0443\u043a\u0438")),r.a.createElement(x.i,null,r.a.createElement(x.j,{to:"/add",exact:!0,onClick:i},r.a.createElement(x.g,{icon:"plus-circle",className:"mr-1"}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"))),r.a.createElement(x.l,{right:!0},r.a.createElement(x.i,null,r.a.createElement(x.j,{to:"/profile",onClick:i},r.a.createElement(x.g,{icon:"user-alt",className:"mr-1"}),"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")),r.a.createElement(x.i,null,r.a.createElement(x.j,{className:"waves-effect waves-light d-flex align-items-center mr-3",to:"/cart",onClick:i},l>0?r.a.createElement("span",{id:"cart-number"},l):null,r.a.createElement(x.g,{icon:"shopping-cart",className:"ml-1"}))),r.a.createElement(x.i,null,r.a.createElement(x.j,{to:"/logout",onClick:function(){return o(k())}},r.a.createElement(x.g,{icon:"sign-out-alt",className:"mr-1"}),"\u0412\u044b\u0439\u0442\u0438")))))}),B=(a(142),function(){return r.a.createElement("section",{className:"details"},r.a.createElement(x.e,null,r.a.createElement(w,{title:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),r.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043d\u043e\u0443\u0442\u0431\u0443\u043a\u0430 \u0438\u0437 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438")))}),V=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth.token}));return Object(n.useEffect)((function(){e((function(e){var t=localStorage.getItem("token");e(t?N(t):k(t))}))})),t?r.a.createElement(g.a,null,t&&r.a.createElement(G,null),r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/",exact:!0,component:U}),r.a.createElement(_.b,{path:"/laptops",exact:!0,component:H}),r.a.createElement(_.b,{path:"/laptops/:id",component:B}),r.a.createElement(_.b,{path:"/cart",component:L}),r.a.createElement(_.b,{path:"/add",component:y}),r.a.createElement(_.b,{path:"/profile",component:D}),r.a.createElement(_.a,{to:"/"}))):r.a.createElement(g.a,null,r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/auth",component:R}),r.a.createElement(_.a,{to:"/auth"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(143);var X="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):l.d,q=Object(l.e)(E,X(Object(l.a)(d.a)));o.a.render(r.a.createElement(s.a,{store:q},r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.03e422ef.chunk.js.map